var yt=Object.defineProperty;var Ke=s=>{throw TypeError(s)};var bt=(s,e,t)=>e in s?yt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var b=(s,e,t)=>bt(s,typeof e!="symbol"?e+"":e,t),Ue=(s,e,t)=>e.has(s)||Ke("Cannot "+t);var Z=(s,e,t)=>(Ue(s,e,"read from private field"),t?t.call(s):e.get(s)),xe=(s,e,t)=>e.has(s)?Ke("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Ve=(s,e,t,n)=>(Ue(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t);import{c as P}from"./ApiRef-BSBwTmJJ.js";import{O as ke}from"./index-CFaqwFgm.js";import{x as E,v as K,t as z,i as D}from"./defaultTheme-CzJIUhLY.js";import{_ as A}from"./classCallCheck-BNzALLS0.js";import{_ as me,b as ie,a as T}from"./inherits-Ax9O35oZ.js";import{_ as wt}from"./toArray-BIgjzDMT.js";import{a as St}from"./TranslationApi-eOxINumg.js";var fe=(s=>(s.SignedIn="SignedIn",s.SignedOut="SignedOut",s))(fe||{});const Or=P({id:"core.auth.google"}),xr=P({id:"core.auth.github"}),Rr=P({id:"core.auth.okta"}),Pr=P({id:"core.auth.gitlab"}),jr=P({id:"core.auth.microsoft"}),Lr=P({id:"core.auth.onelogin"}),kr=P({id:"core.auth.bitbucket"});P({id:"core.auth.bitbucket-server"});const Cr=P({id:"core.auth.atlassian"});P({id:"core.auth.vmware-cloud"});const Er=P({id:"core.alert"});var le=(s=>(s[s.None=0]="None",s[s.Active=1]="Active",s))(le||{});const Ar=P({id:"core.featureflags"}),Nr=P({id:"core.identity"}),Ir=P({id:"core.oauthrequest"});function Ot(s){return new Promise((e,t)=>{const n=s.width||500,r=s.height||700,i=window.screen.width/2-n/2,a=window.screen.height/2-r/2,o=window.open(s.url,s.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${n},height=${r},top=${a},left=${i}`);let u="";if(!o||typeof o.closed>"u"||o.closed){const l=new Error("Failed to open auth popup.");l.name="PopupRejectedError",t(l);return}const f=l=>{if(l.source!==o||l.origin!==s.origin)return;const{data:g}=l;if(g.type==="config_info"){u=g.targetOrigin;return}if(g.type!=="authorization_response")return;const p=g;if("error"in p){const y=new Error(p.error.message);y.name=p.error.name,t(y)}else e(p.response);c()},h=setInterval(()=>{if(o.closed){const l=`Login failed, ${u&&u!==window.location.origin?`Incorrect app origin, expected ${u}`:"popup was closed"}`,g=new Error(l);g.name="PopupClosedError",t(g),c()}},100);function c(){window.removeEventListener("message",f),clearInterval(h)}window.addEventListener("message",f)})}let Me=!1;function xt(s){return[...s].join(" ")}class Rt{constructor(e){b(this,"discoveryApi");b(this,"environment");b(this,"provider");b(this,"joinScopesFunc");b(this,"authRequester");b(this,"sessionTransform");b(this,"enableExperimentalRedirectFlow");b(this,"popupOptions");const{configApi:t,discoveryApi:n,environment:r,provider:i,joinScopes:a=xt,oauthRequestApi:o,sessionTransform:u=h=>h,popupOptions:f}=e;!Me&&!t&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),Me=!0),this.enableExperimentalRedirectFlow=t?t.getOptionalBoolean("enableExperimentalRedirectFlow")??!1:!1,this.authRequester=o.createAuthRequester({provider:i,onAuthRequest:async h=>this.enableExperimentalRedirectFlow?this.executeRedirect(h):this.showPopup(h)}),this.discoveryApi=n,this.environment=r,this.provider=i,this.joinScopesFunc=a,this.sessionTransform=u,this.popupOptions=f}async createSession(e){return e.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(e.scopes):this.showPopup(e.scopes):this.authRequester(e.scopes)}async refreshSession(e){const t=await fetch(await this.buildUrl("/refresh",{optional:!0,...e&&{scope:this.joinScopesFunc(e)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(r=>{throw new Error(`Auth refresh request failed, ${r}`)});if(!t.ok){const r=new Error(`Auth refresh request failed, ${t.statusText}`);throw r.status=t.status,r}const n=await t.json();if(n.error){const r=new Error(n.error.message);throw n.error.name&&(r.name=n.error.name),r}return await this.sessionTransform(n)}async removeSession(){const e=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(t=>{throw new Error(`Logout request failed, ${t}`)});if(!e.ok){const t=new Error(`Logout request failed, ${e.statusText}`);throw t.status=e.status,t}}async showPopup(e){var o,u,f,h,c,l,g,p;const t=this.joinScopesFunc(e),n=await this.buildUrl("/start",{scope:t,origin:window.location.origin,flow:"popup"}),r=(u=(o=this.popupOptions)==null?void 0:o.size)!=null&&u.fullscreen?window.screen.width:((h=(f=this.popupOptions)==null?void 0:f.size)==null?void 0:h.width)||450,i=(l=(c=this.popupOptions)==null?void 0:c.size)!=null&&l.fullscreen?window.screen.height:((p=(g=this.popupOptions)==null?void 0:g.size)==null?void 0:p.height)||730,a=await Ot({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:r,height:i});return await this.sessionTransform(a)}async executeRedirect(e){const t=this.joinScopesFunc(e);return window.location.href=await this.buildUrl("/start",{scope:t,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(e,t){const n=await this.discoveryApi.getBaseUrl("auth"),r=this.buildQueryString({...t,env:this.environment});return`${n}/${this.provider.id}${e}${r}`}buildQueryString(e){if(!e)return"";const t=Object.entries(e).map(([n,r])=>{if(typeof r=="string")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r)return encodeURIComponent(n)}).filter(Boolean).join("&");return t?`?${t}`:""}}function ft(s,e){for(const t of e)if(!s.has(t))return!1;return!0}class Pt{constructor(e){this.options=e}sessionExistsAndHasScope(e,t){if(!e)return!1;if(!t||this.options.sessionScopes===void 0)return!0;const n=this.options.sessionScopes(e);return ft(n,t)}getExtendedScope(e,t){const n=new Set(this.options.defaultScopes);if(e&&this.options.sessionScopes!==void 0){const r=this.options.sessionScopes(e);for(const i of r)n.add(i)}if(t)for(const r of t)n.add(r);return n}}class lt{constructor(){b(this,"isClosed",!1);b(this,"terminatingError");b(this,"observable",new ke(e=>this.isClosed?(this.terminatingError?e.error(this.terminatingError):e.complete(),()=>{}):(this.subscribers.add(e),()=>{this.subscribers.delete(e)})));b(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(t=>t.next(e))}error(e){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach(t=>t.error(e))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(e=>e.complete())}subscribe(e,t,n){const r=typeof e=="function"?{next:e,error:t,complete:n}:e;return this.observable.subscribe(r)}}class Ce{constructor(e){b(this,"isClosed");b(this,"currentValue");b(this,"terminatingError");b(this,"observable");b(this,"subscribers",new Set);this.isClosed=!1,this.currentValue=e,this.terminatingError=void 0,this.observable=new ke(t=>this.isClosed?(this.terminatingError?t.error(this.terminatingError):t.complete(),()=>{}):(t.next(this.currentValue),this.subscribers.add(t),()=>{this.subscribers.delete(t)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(e){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=e,this.subscribers.forEach(t=>t.next(e))}error(e){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=e,this.subscribers.forEach(t=>t.error(e))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(e=>e.complete())}subscribe(e,t,n){const r=typeof e=="function"?{next:e,error:t,complete:n}:e;return this.observable.subscribe(r)}}class jt{constructor(){b(this,"subject",new Ce(fe.SignedOut));b(this,"signedIn",!1)}setIsSignedIn(e){this.signedIn!==e&&(this.signedIn=e,this.subject.next(this.signedIn?fe.SignedIn:fe.SignedOut))}sessionState$(){return this.subject}}class Lt{constructor(e){b(this,"connector");b(this,"helper");b(this,"sessionScopesFunc");b(this,"sessionShouldRefreshFunc");b(this,"stateTracker",new jt);b(this,"refreshPromise");b(this,"currentSession");const{connector:t,defaultScopes:n=new Set,sessionScopes:r,sessionShouldRefresh:i}=e;this.connector=t,this.sessionScopesFunc=r,this.sessionShouldRefreshFunc=i,this.helper=new Pt({sessionScopes:r,defaultScopes:n})}async getSession(e){if(this.helper.sessionExistsAndHasScope(this.currentSession,e.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const n=await this.collapsedSessionRefresh(e.scopes),r=this.sessionScopesFunc(this.currentSession),i=this.sessionScopesFunc(n);return ft(i,r)&&(this.currentSession=n),n}catch(n){if(e.optional)return;throw n}}if(!this.currentSession&&!e.instantPopup)try{const t=await this.collapsedSessionRefresh(e.scopes);return this.currentSession=t,this.getSession(e)}catch{}if(!e.optional)return this.currentSession=await this.connector.createSession({...e,scopes:this.helper.getExtendedScope(this.currentSession,e.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(e){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,e));try{const t=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),t}finally{delete this.refreshPromise}}}const kt={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class F{constructor(e){b(this,"sessionManager");b(this,"scopeTransform");this.sessionManager=e.sessionManager,this.scopeTransform=e.scopeTransform}static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=kt,oauthRequestApi:a,defaultScopes:o=[],scopeTransform:u=l=>l,popupOptions:f}=e,h=new Rt({configApi:t,discoveryApi:n,environment:r,provider:i,oauthRequestApi:a,sessionTransform({backstageIdentity:l,...g}){const p={...g,providerInfo:{idToken:g.providerInfo.idToken,accessToken:g.providerInfo.accessToken,scopes:F.normalizeScopes(u,g.providerInfo.scope),expiresAt:g.providerInfo.expiresInSeconds?new Date(Date.now()+g.providerInfo.expiresInSeconds*1e3):void 0}};return l&&(p.backstageIdentity={token:l.token,identity:l.identity,expiresAt:l.expiresInSeconds?new Date(Date.now()+l.expiresInSeconds*1e3):void 0}),p},popupOptions:f}),c=new Lt({connector:h,defaultScopes:new Set(o),sessionScopes:l=>l.providerInfo.scopes,sessionShouldRefresh:l=>{var p,y;let g=1/0;return(p=l.providerInfo)!=null&&p.expiresAt&&(g=Math.min(g,(l.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(y=l.backstageIdentity)!=null&&y.expiresAt&&(g=Math.min(g,(l.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),g<60*5}});return new F({sessionManager:c,scopeTransform:u})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(e,t){const n=F.normalizeScopes(this.scopeTransform,e),r=await this.sessionManager.getSession({...t,scopes:n});return(r==null?void 0:r.providerInfo.accessToken)??""}async getIdToken(e={}){const t=await this.sessionManager.getSession({...e,scopes:new Set(["openid"])});return(t==null?void 0:t.providerInfo.idToken)??""}async getBackstageIdentity(e={}){const t=await this.sessionManager.getSession(e);return t==null?void 0:t.backstageIdentity}async getProfile(e={}){const t=await this.sessionManager.getSession(e);return t==null?void 0:t.profile}static normalizeScopes(e,t){if(!t)return new Set;const n=Array.isArray(t)?t:t.split(/[\s|,]/).filter(Boolean);return new Set(e(n))}}const Ct={id:"github",title:"GitHub",icon:()=>null};class Fr{static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=Ct,oauthRequestApi:a,defaultScopes:o=["read:user"]}=e;return F.create({configApi:t,discoveryApi:n,oauthRequestApi:a,provider:i,environment:r,defaultScopes:o})}}const Et={id:"gitlab",title:"GitLab",icon:()=>null};class Tr{static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=Et,oauthRequestApi:a,defaultScopes:o=["read_user"]}=e;return F.create({configApi:t,discoveryApi:n,oauthRequestApi:a,provider:i,environment:r,defaultScopes:o})}}const At={id:"google",title:"Google",icon:()=>null},ee="https://www.googleapis.com/auth/";class $r{static create(e){const{configApi:t,discoveryApi:n,oauthRequestApi:r,environment:i="development",provider:a=At,defaultScopes:o=["openid",`${ee}userinfo.email`,`${ee}userinfo.profile`]}=e;return F.create({configApi:t,discoveryApi:n,oauthRequestApi:r,provider:a,environment:i,defaultScopes:o,scopeTransform(u){return u.map(f=>f==="openid"?f:f==="profile"||f==="email"?`${ee}userinfo.${f}`:f.startsWith(ee)?f:`${ee}${f}`)}})}}const Nt={id:"okta",title:"Okta",icon:()=>null},It=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Be="okta.";class Dr{static create(e){const{configApi:t,discoveryApi:n,environment:r="development",provider:i=Nt,oauthRequestApi:a,defaultScopes:o=["openid","email","profile","offline_access"]}=e;return F.create({configApi:t,discoveryApi:n,oauthRequestApi:a,provider:i,environment:r,defaultScopes:o,scopeTransform(u){return u.map(f=>It.has(f)||f.startsWith(Be)?f:`${Be}${f}`)}})}}class _r{constructor(){b(this,"subject",new lt)}post(e){this.subject.next(e)}alert$(){return this.subject}}const Ft=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function he(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Le(s){return typeof s!="object"||s===null?s:Array.isArray(s)?s.map(Le):Object.fromEntries(Object.entries(s).map(([e,t])=>[e,Le(t)]))}function re(s,e){if(s===null)return;if(s===void 0)return e===void 0?void 0:re(e);if(typeof s!="object"||Array.isArray(s))return s;const t=he(e)?e:{},n={};for(const r of new Set([...Object.keys(s),...Object.keys(t)])){const i=re(s[r],t[r]);i!==void 0&&(n[r]=i)}return n}function Re(s){if(s===null)return"null";if(Array.isArray(s))return"array";const e=typeof s;return e==="number"&&isNaN(s)?"nan":e==="string"&&s===""?"empty-string":e}const j={type(s,e,t,n){return`Invalid type in config for key '${s}' in '${e}', got ${t}, wanted ${n}`},missing(s,e){return`Missing required config value at '${s}' in '${e}'`},convert(s,e,t){return`Unable to convert config value for key '${s}' in '${e}' to a ${t}`}};class ge{constructor(e,t="mock-config",n,r=""){b(this,"filteredKeys");b(this,"notifiedFilteredKeys",new Set);this.data=e,this.context=t,this.fallback=n,this.prefix=r}static fromConfigs(e){return e.length===0?new ge(void 0):e.reduce((t,{data:n,context:r,filteredKeys:i,deprecatedKeys:a})=>{const o=new ge(n,r,t);if(o.filteredKeys=i,a)for(const{key:u,description:f}of a)console.warn(`The configuration key '${u}' of ${r} is deprecated and may be removed soon. ${f||""}`);return o},void 0)}has(e){var n;const t=this.readValue(e);return t===null?!1:t!==void 0?!0:((n=this.fallback)==null?void 0:n.has(e))??!1}keys(){var n;const e=this.data?Object.keys(this.data):[],t=((n=this.fallback)==null?void 0:n.keys())??[];return[...new Set([...e,...t])].filter(r=>{var i;return((i=this.data)==null?void 0:i[r])!==null})}get(e){const t=this.getOptional(e);if(t===void 0)throw new Error(j.missing(this.fullKey(e??""),this.context));return t}getOptional(e){var r;const t=Le(this.readValue(e)),n=(r=this.fallback)==null?void 0:r.getOptional(e);if(t!==null)return t===void 0?re(n):n===void 0?re(t):re(t,n)}getConfig(e){const t=this.getOptionalConfig(e);if(t===void 0)throw new Error(j.missing(this.fullKey(e),this.context));return t}getOptionalConfig(e){var r;const t=this.readValue(e),n=(r=this.fallback)==null?void 0:r.getOptionalConfig(e);if(he(t))return this.copy(t,e,n);if(t!==null){if(t!==void 0)throw new TypeError(j.type(this.fullKey(e),this.context,Re(t),"object"));return n}}getConfigArray(e){const t=this.getOptionalConfigArray(e);if(t===void 0)throw new Error(j.missing(this.fullKey(e),this.context));return t}getOptionalConfigArray(e){const t=this.readConfigValue(e,n=>{if(!Array.isArray(n))return{expected:"object-array"};for(const[r,i]of n.entries())if(!he(i))return{expected:"object-array",value:i,key:`${e}[${r}]`};return!0});if(t)return t.map((n,r)=>this.copy(n,`${e}[${r}]`))}getNumber(e){const t=this.getOptionalNumber(e);if(t===void 0)throw new Error(j.missing(this.fullKey(e),this.context));return t}getOptionalNumber(e){const t=this.readConfigValue(e,r=>typeof r=="number"||typeof r=="string"||{expected:"number"});if(typeof t=="number"||t===void 0)return t;const n=Number(t);if(!Number.isFinite(n))throw new Error(j.convert(this.fullKey(e),this.context,"number"));return n}getBoolean(e){const t=this.getOptionalBoolean(e);if(t===void 0)throw new Error(j.missing(this.fullKey(e),this.context));return t}getOptionalBoolean(e){const t=this.readConfigValue(e,r=>typeof r=="boolean"||typeof r=="number"||typeof r=="string"||{expected:"boolean"});if(typeof t=="boolean"||t===void 0)return t;const n=String(t).trim();if(/^(?:y|yes|true|1|on)$/i.test(n))return!0;if(/^(?:n|no|false|0|off)$/i.test(n))return!1;throw new Error(j.convert(this.fullKey(e),this.context,"boolean"))}getString(e){const t=this.getOptionalString(e);if(t===void 0)throw new Error(j.missing(this.fullKey(e),this.context));return t}getOptionalString(e){return this.readConfigValue(e,t=>typeof t=="string"&&t!==""||{expected:"string"})}getStringArray(e){const t=this.getOptionalStringArray(e);if(t===void 0)throw new Error(j.missing(this.fullKey(e),this.context));return t}getOptionalStringArray(e){return this.readConfigValue(e,t=>{if(!Array.isArray(t))return{expected:"string-array"};for(const[n,r]of t.entries())if(typeof r!="string"||r==="")return{expected:"string-array",value:r,key:`${e}[${n}]`};return!0})}fullKey(e){return`${this.prefix}${this.prefix?".":""}${e}`}copy(e,t,n){const r=new ge(e,this.context,n,this.fullKey(t));return r.filteredKeys=this.filteredKeys,r}readConfigValue(e,t){var i;const n=this.readValue(e);if(n===void 0)return(i=this.fallback)==null?void 0:i.readConfigValue(e,t);if(n===null)return;const r=t(n);if(r!==!0){const{key:a=e,value:o=n,expected:u}=r;throw new TypeError(j.type(this.fullKey(a),this.context,Re(o),u))}return n}readValue(e){const t=e?e.split("."):[];for(const r of t)if(!Ft.test(r))throw new TypeError(`Invalid config key '${e}'`);if(this.data===void 0)return;let n=this.data;for(const[r,i]of t.entries())if(he(n))n=n[i];else if(n!=null){const a=this.fullKey(t.slice(0,r).join("."));throw new TypeError(j.type(a,this.context,Re(n),"object"))}return n}}class Kr{constructor(e,t){this.alertApi=e,this.errorApi=t}post(e,t){return t!=null&&t.hidden||this.alertApi.post({message:e.message,severity:"error"}),this.errorApi.post(e,t)}error$(){return this.errorApi.error$()}}class Ur{constructor(){b(this,"subject",new lt)}post(e,t){this.subject.next({error:e,context:t})}error$(){return this.subject}}function qe(s){if(s.length<3)throw new Error(`The '${s}' feature flag must have a minimum length of three characters.`);if(s.length>150)throw new Error(`The '${s}' feature flag must not exceed 150 characters.`);if(!s.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${s}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class Vr{constructor(){b(this,"registeredFeatureFlags",[]);b(this,"flags")}registerFlag(e){qe(e.name),this.registeredFeatureFlags.push(e)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(e){return this.flags||(this.flags=this.load()),this.flags.get(e)===le.Active}save(e){this.flags||(this.flags=this.load()),e.merge||this.flags.clear();for(const[n,r]of Object.entries(e.states))this.flags.set(n,r);const t=Array.from(this.flags.entries()).filter(([,n])=>n===le.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(t)))}load(){try{const e=window.localStorage.getItem("featureFlags");if(!e)return new Map;const t=JSON.parse(e);if(typeof t!="object"||t===null||Array.isArray(t))return new Map;const n=Object.entries(t).filter(([r,i])=>(qe(r),i===le.Active));return new Map(n)}catch{return new Map}}}function Tt(s,e){for(const t of e)if(!s.has(t))return!1;return!0}function $t(s,...e){const t=new Set(s);for(const n of e)for(const r of n)t.add(r);return t}class Dt{constructor(){b(this,"requests",[]);b(this,"subject",new Ce(this.getCurrentPending()))}request(e){return new Promise((t,n)=>{this.requests.push({scopes:e,resolve:t,reject:n}),this.subject.next(this.getCurrentPending())})}resolve(e,t){this.requests=this.requests.filter(n=>Tt(e,n.scopes)?(n.resolve(t),!1):!0),this.subject.next(this.getCurrentPending())}reject(e){this.requests.forEach(t=>t.reject(e)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const e=this.requests.length===0?void 0:this.requests.slice(1).reduce((t,n)=>$t(t,n.scopes),this.requests[0].scopes);return{scopes:e,resolve:t=>{e&&this.resolve(e,t)},reject:t=>{e&&this.reject(t)}}}}class Mr{constructor(){b(this,"subject",new Ce([]));b(this,"currentRequests",[]);b(this,"handlerCount",0)}createAuthRequester(e){const t=new Dt,n=this.handlerCount;return this.handlerCount++,t.pending().subscribe({next:r=>{const i=this.currentRequests.slice(),a=this.makeAuthRequest(r,e);a?i[n]=a:delete i[n],this.currentRequests=i,this.subject.next(i.filter(Boolean))}}),r=>t.request(r)}makeAuthRequest(e,t){const{scopes:n}=e;if(n)return{provider:t.provider,trigger:async()=>{const r=await t.onAuthRequest(n);e.resolve(r)},reject:()=>{const r=new Error("Login failed, rejected by user");r.name="RejectedError",e.reject(r)}}}authRequest$(){return this.subject}}function ze(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function He(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ze(Object(t),!0).forEach(function(n){D(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ze(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}var _t={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Kt=function(){function s(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A(this,s),this.init(e,t)}return E(s,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||_t,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,n,r,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(r).concat(this.prefix," ").concat(t[0])),this.logger[n](t))}},{key:"create",value:function(t){return new s(this.logger,He(He({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new s(this.logger,t)}}]),s}(),C=new Kt,$=function(){function s(){A(this,s),this.observers={}}return E(s,[{key:"on",value:function(t,n){var r=this;return t.split(" ").forEach(function(i){r.observers[i]=r.observers[i]||[],r.observers[i].push(n)}),this}},{key:"off",value:function(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(r){return r!==n})}}},{key:"emit",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.observers[t]){var a=[].concat(this.observers[t]);a.forEach(function(u){u.apply(void 0,r)})}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach(function(u){u.apply(u,[t].concat(r))})}}}]),s}();function te(){var s,e,t=new Promise(function(n,r){s=n,e=r});return t.resolve=s,t.reject=e,t}function Je(s){return s==null?"":""+s}function Ut(s,e,t){s.forEach(function(n){e[n]&&(t[n]=e[n])})}function Ee(s,e,t){function n(o){return o&&o.indexOf("###")>-1?o.replace(/###/g,"."):o}function r(){return!s||typeof s=="string"}for(var i=typeof e!="string"?[].concat(e):e.split(".");i.length>1;){if(r())return{};var a=n(i.shift());!s[a]&&t&&(s[a]=new t),Object.prototype.hasOwnProperty.call(s,a)?s=s[a]:s={}}return r()?{}:{obj:s,k:n(i.shift())}}function Ge(s,e,t){var n=Ee(s,e,Object),r=n.obj,i=n.k;r[i]=t}function Vt(s,e,t,n){var r=Ee(s,e,Object),i=r.obj,a=r.k;i[a]=i[a]||[],i[a].push(t)}function de(s,e){var t=Ee(s,e),n=t.obj,r=t.k;if(n)return n[r]}function Mt(s,e,t){var n=de(s,t);return n!==void 0?n:de(e,t)}function ht(s,e,t){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in s?typeof s[n]=="string"||s[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?t&&(s[n]=e[n]):ht(s[n],e[n],t):s[n]=e[n]);return s}function B(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function qt(s){return typeof s=="string"?s.replace(/[&<>"'\/]/g,function(e){return Bt[e]}):s}var ye=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,zt=[" ",",","?","!",";"];function Ht(s,e,t){e=e||"",t=t||"";var n=zt.filter(function(o){return e.indexOf(o)<0&&t.indexOf(o)<0});if(n.length===0)return!0;var r=new RegExp("(".concat(n.map(function(o){return o==="?"?"\\?":o}).join("|"),")")),i=!r.test(s);if(!i){var a=s.indexOf(t);a>0&&!r.test(s.substring(0,a))&&(i=!0)}return i}function pe(s,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(s){if(s[e])return s[e];for(var n=e.split(t),r=s,i=0;i<n.length;++i){if(!r||typeof r[n[i]]=="string"&&i+1<n.length)return;if(r[n[i]]===void 0){for(var a=2,o=n.slice(i,i+a).join(t),u=r[o];u===void 0&&n.length>i+a;)a++,o=n.slice(i,i+a).join(t),u=r[o];if(u===void 0)return;if(u===null)return null;if(e.endsWith(o)){if(typeof u=="string")return u;if(o&&typeof u[o]=="string")return u[o]}var f=n.slice(i+a).join(t);return f?pe(u,f,t):void 0}r=r[n[i]]}return r}}function We(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function ue(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?We(Object(t),!0).forEach(function(n){D(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function Jt(s){var e=Gt();return function(){var n=T(s),r;if(e){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ie(this,r)}}function Gt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wt=function(s){me(t,s);var e=Jt(t);function t(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return A(this,t),r=e.call(this),ye&&$.call(K(r)),r.data=n||{},r.options=i,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return E(t,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var i=this.options.ns.indexOf(r);i>-1&&this.options.ns.splice(i,1)}},{key:"getResource",value:function(r,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,f=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,h=[r,i];a&&typeof a!="string"&&(h=h.concat(a)),a&&typeof a=="string"&&(h=h.concat(u?a.split(u):a)),r.indexOf(".")>-1&&(h=r.split("."));var c=de(this.data,h);return c||!f||typeof a!="string"?c:pe(this.data&&this.data[r]&&this.data[r][i],a,u)}},{key:"addResource",value:function(r,i,a,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},f=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,h=[r,i];a&&(h=h.concat(f?a.split(f):a)),r.indexOf(".")>-1&&(h=r.split("."),o=i,i=h[1]),this.addNamespaces(i),Ge(this.data,h,o),u.silent||this.emit("added",r,i,a,o)}},{key:"addResources",value:function(r,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in a)(typeof a[u]=="string"||Object.prototype.toString.apply(a[u])==="[object Array]")&&this.addResource(r,i,u,a[u],{silent:!0});o.silent||this.emit("added",r,i,a)}},{key:"addResourceBundle",value:function(r,i,a,o,u){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},h=[r,i];r.indexOf(".")>-1&&(h=r.split("."),o=a,a=i,i=h[1]),this.addNamespaces(i);var c=de(this.data,h)||{};o?ht(c,a,u):c=ue(ue({},c),a),Ge(this.data,h,c),f.silent||this.emit("added",r,i,a)}},{key:"removeResourceBundle",value:function(r,i){this.hasResourceBundle(r,i)&&delete this.data[r][i],this.removeNamespaces(i),this.emit("removed",r,i)}},{key:"hasResourceBundle",value:function(r,i){return this.getResource(r,i)!==void 0}},{key:"getResourceBundle",value:function(r,i){return i||(i=this.options.defaultNS),this.options.compatibilityAPI==="v1"?ue(ue({},{}),this.getResource(r,i)):this.getResource(r,i)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var i=this.getDataByLanguage(r),a=i&&Object.keys(i)||[];return!!a.find(function(o){return i[o]&&Object.keys(i[o]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}($),gt={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var a=this;return e.forEach(function(o){a.processors[o]&&(t=a.processors[o].process(t,n,r,i))}),t}};function Ye(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function O(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ye(Object(t),!0).forEach(function(n){D(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Ye(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function Yt(s){var e=Qt();return function(){var n=T(s),r;if(e){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ie(this,r)}}function Qt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qe={},Xe=function(s){me(t,s);var e=Yt(t);function t(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return A(this,t),r=e.call(this),ye&&$.call(K(r)),Ut(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,K(r)),r.options=i,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=C.create("translator"),r}return E(t,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var a=this.resolve(r,i);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(r,i){var a=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,u=i.ns||this.options.defaultNS||[],f=a&&r.indexOf(a)>-1,h=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!Ht(r,a,o);if(f&&!h){var c=r.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:r,namespaces:u};var l=r.split(a);(a!==o||a===o&&this.options.ns.indexOf(l[0])>-1)&&(u=l.shift()),r=l.join(o)}return typeof u=="string"&&(u=[u]),{key:r,namespaces:u}}},{key:"translate",value:function(r,i,a){var o=this;if(z(i)!=="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),z(i)==="object"&&(i=O({},i)),i||(i={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var u=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,f=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,h=this.extractFromKey(r[r.length-1],i),c=h.key,l=h.namespaces,g=l[l.length-1],p=i.lng||this.language,y=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(y){var m=i.nsSeparator||this.options.nsSeparator;return u?{res:"".concat(g).concat(m).concat(c),usedKey:c,exactUsedKey:c,usedLng:p,usedNS:g}:"".concat(g).concat(m).concat(c)}return u?{res:c,usedKey:c,exactUsedKey:c,usedLng:p,usedNS:g}:c}var d=this.resolve(r,i),v=d&&d.res,S=d&&d.usedKey||c,w=d&&d.exactUsedKey||c,R=Object.prototype.toString.apply(v),N=["[object Number]","[object Function]","[object RegExp]"],_=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,J=!this.i18nFormat||this.i18nFormat.handleAsObject,G=typeof v!="string"&&typeof v!="boolean"&&typeof v!="number";if(J&&v&&G&&N.indexOf(R)<0&&!(typeof _=="string"&&R==="[object Array]")){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,v,O(O({},i),{},{ns:l})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return u?(d.res=U,d):U}if(f){var Ne=R==="[object Array]",se=Ne?[]:{},dt=Ne?w:S;for(var V in v)if(Object.prototype.hasOwnProperty.call(v,V)){var Ie="".concat(dt).concat(f).concat(V);se[V]=this.translate(Ie,O(O({},i),{joinArrays:!1,ns:l})),se[V]===Ie&&(se[V]=v[V])}v=se}}else if(J&&typeof _=="string"&&R==="[object Array]")v=v.join(_),v&&(v=this.extendTranslation(v,r,i,a));else{var ae=!1,W=!1,Fe=i.count!==void 0&&typeof i.count!="string",be=t.hasDefaultValue(i),pt=Fe?this.pluralResolver.getSuffix(p,i.count,i):"",Y=i["defaultValue".concat(pt)]||i.defaultValue;!this.isValidLookup(v)&&be&&(ae=!0,v=Y),this.isValidLookup(v)||(W=!0,v=c);var vt=i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,mt=vt&&W?void 0:v,Q=be&&Y!==v&&this.options.updateMissing;if(W||ae||Q){if(this.logger.log(Q?"updateKey":"missingKey",p,g,c,Q?Y:v),f){var Te=this.resolve(c,O(O({},i),{},{keySeparator:!1}));Te&&Te.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var X=[],oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&oe&&oe[0])for(var we=0;we<oe.length;we++)X.push(oe[we]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(i.lng||this.language):X.push(i.lng||this.language);var $e=function(M,Oe,De){var _e=be&&De!==v?De:mt;o.options.missingKeyHandler?o.options.missingKeyHandler(M,g,Oe,_e,Q,i):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(M,g,Oe,_e,Q,i),o.emit("missingKey",M,g,Oe,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Fe?X.forEach(function(Se){o.pluralResolver.getSuffixes(Se,i).forEach(function(M){$e([Se],c+M,i["defaultValue".concat(M)]||Y)})}):$e(X,c,Y))}v=this.extendTranslation(v,r,i,d,a),W&&v===c&&this.options.appendNamespaceToMissingKey&&(v="".concat(g,":").concat(c)),(W||ae)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(g,":").concat(c):c,ae?v:void 0):v=this.options.parseMissingKeyHandler(v))}return u?(d.res=v,d):v}},{key:"extendTranslation",value:function(r,i,a,o,u){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,O(O({},this.options.interpolation.defaultVariables),a),o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(O(O({},a),{interpolation:O(O({},this.options.interpolation),a.interpolation)}));var h=typeof r=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(h){var l=r.match(this.interpolator.nestingRegexp);c=l&&l.length}var g=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(g=O(O({},this.options.interpolation.defaultVariables),g)),r=this.interpolator.interpolate(r,g,a.lng||this.language,a),h){var p=r.match(this.interpolator.nestingRegexp),y=p&&p.length;c<y&&(a.nest=!1)}!a.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(a.lng=o.usedLng),a.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var v=arguments.length,S=new Array(v),w=0;w<v;w++)S[w]=arguments[w];return u&&u[0]===S[0]&&!a.context?(f.logger.warn("It seems you are nesting recursively key: ".concat(S[0]," in key: ").concat(i[0])),null):f.translate.apply(f,S.concat([i]))},a)),a.interpolation&&this.interpolator.reset()}var m=a.postProcess||this.options.postProcess,d=typeof m=="string"?[m]:m;return r!=null&&d&&d.length&&a.applyPostProcessor!==!1&&(r=gt.handle(d,r,i,this.options&&this.options.postProcessPassResolved?O({i18nResolved:o},a):a,this)),r}},{key:"resolve",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o,u,f,h,c;return typeof r=="string"&&(r=[r]),r.forEach(function(l){if(!i.isValidLookup(o)){var g=i.extractFromKey(l,a),p=g.key;u=p;var y=g.namespaces;i.options.fallbackNS&&(y=y.concat(i.options.fallbackNS));var m=a.count!==void 0&&typeof a.count!="string",d=m&&!a.ordinal&&a.count===0&&i.pluralResolver.shouldUseIntlApi(),v=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",S=a.lngs?a.lngs:i.languageUtils.toResolveHierarchy(a.lng||i.language,a.fallbackLng);y.forEach(function(w){i.isValidLookup(o)||(c=w,!Qe["".concat(S[0],"-").concat(w)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(c)&&(Qe["".concat(S[0],"-").concat(w)]=!0,i.logger.warn('key "'.concat(u,'" for languages "').concat(S.join(", "),`" won't get resolved as namespace "`).concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(function(R){if(!i.isValidLookup(o)){h=R;var N=[p];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(N,p,R,w,a);else{var _;m&&(_=i.pluralResolver.getSuffix(R,a.count,a));var J="".concat(i.options.pluralSeparator,"zero");if(m&&(N.push(p+_),d&&N.push(p+J)),v){var G="".concat(p).concat(i.options.contextSeparator).concat(a.context);N.push(G),m&&(N.push(G+_),d&&N.push(G+J))}}for(var U;U=N.pop();)i.isValidLookup(o)||(f=U,o=i.getResource(R,w,U,a))}}))})}}),{res:o,usedKey:u,exactUsedKey:f,usedLng:h,usedNS:c}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,i,a,o):this.resourceStore.getResource(r,i,a,o)}}],[{key:"hasDefaultValue",value:function(r){var i="defaultValue";for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&i===a.substring(0,i.length)&&r[a]!==void 0)return!0;return!1}}]),t}($);function Pe(s){return s.charAt(0).toUpperCase()+s.slice(1)}var Ze=function(){function s(e){A(this,s),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=C.create("languageUtils")}return E(s,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var n=t.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],r=t.split("-");return this.options.lowerCaseLng?r=r.map(function(i){return i.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Pe(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Pe(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Pe(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var n=this;if(!t)return null;var r;return t.forEach(function(i){if(!r){var a=n.formatLanguageCode(i);(!n.options.supportedLngs||n.isSupportedCode(a))&&(r=a)}}),!r&&this.options.supportedLngs&&t.forEach(function(i){if(!r){var a=n.getLanguagePartFromCode(i);if(n.isSupportedCode(a))return r=a;r=n.options.supportedLngs.find(function(o){if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&o.indexOf(a)===0)return o})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];var r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}},{key:"toResolveHierarchy",value:function(t,n){var r=this,i=this.getFallbackCodes(n||this.options.fallbackLng||[],t),a=[],o=function(f){f&&(r.isSupportedCode(f)?a.push(f):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(f)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),i.forEach(function(u){a.indexOf(u)<0&&o(r.formatLanguageCode(u))}),a}}]),s}(),Xt=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Zt={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},er=["v1","v2","v3"],et={zero:0,one:1,two:2,few:3,many:4,other:5};function tr(){var s={};return Xt.forEach(function(e){e.lngs.forEach(function(t){s[t]={numbers:e.nr,plurals:Zt[e.fc]}})}),s}var rr=function(){function s(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A(this,s),this.languageUtils=e,this.options=t,this.logger=C.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=tr()}return E(s,[{key:"addRule",value:function(t,n){this.rules[t]=n}},{key:"getRule",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(function(i){return"".concat(n).concat(i)})}},{key:"getSuffixes",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort(function(a,o){return et[a]-et[o]}).map(function(a){return"".concat(n.options.prepend).concat(a)}):i.numbers.map(function(a){return n.getSuffix(t,a,r)}):[]}},{key:"getSuffix",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getRule(t,r);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(n)):this.getSuffixRetroCompatible(i,n):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,n){var r=this,i=t.noAbs?t.plurals(n):t.plurals(Math.abs(n)),a=t.numbers[i];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var o=function(){return r.options.prepend&&a.toString()?r.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!er.includes(this.options.compatibilityJSON)}}]),s}();function tt(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function L(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tt(Object(t),!0).forEach(function(n){D(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):tt(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function rt(s,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Mt(s,e,t);return!i&&r&&typeof t=="string"&&(i=pe(s,t,n),i===void 0&&(i=pe(e,t,n))),i}var nr=function(){function s(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,s),this.logger=C.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return E(s,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var n=t.interpolation;this.escape=n.escape!==void 0?n.escape:qt,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?B(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?B(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?B(n.nestingPrefix):n.nestingPrefixEscaped||B("$t("),this.nestingSuffix=n.nestingSuffix?B(n.nestingSuffix):n.nestingSuffixEscaped||B(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(t,n,r,i){var a=this,o,u,f,h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(m){return m.replace(/\$/g,"$$$$")}var l=function(d){if(d.indexOf(a.formatSeparator)<0){var v=rt(n,h,d,a.options.keySeparator,a.options.ignoreJSONStructure);return a.alwaysFormat?a.format(v,void 0,r,L(L(L({},i),n),{},{interpolationkey:d})):v}var S=d.split(a.formatSeparator),w=S.shift().trim(),R=S.join(a.formatSeparator).trim();return a.format(rt(n,h,w,a.options.keySeparator,a.options.ignoreJSONStructure),R,r,L(L(L({},i),n),{},{interpolationkey:w}))};this.resetRegExp();var g=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,y=[{regex:this.regexpUnescape,safeValue:function(d){return c(d)}},{regex:this.regexp,safeValue:function(d){return a.escapeValue?c(a.escape(d)):c(d)}}];return y.forEach(function(m){for(f=0;o=m.regex.exec(t);){var d=o[1].trim();if(u=l(d),u===void 0)if(typeof g=="function"){var v=g(t,o,i);u=typeof v=="string"?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,d))u="";else if(p){u=o[0];continue}else a.logger.warn("missed to pass in variable ".concat(d," for interpolating ").concat(t)),u="";else typeof u!="string"&&!a.useRawValueToEscape&&(u=Je(u));var S=m.safeValue(u);if(t=t.replace(o[0],S),p?(m.regex.lastIndex+=u.length,m.regex.lastIndex-=o[0].length):m.regex.lastIndex=0,f++,f>=a.maxReplaces)break}}),t}},{key:"nest",value:function(t,n){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,o,u;function f(g,p){var y=this.nestingOptionsSeparator;if(g.indexOf(y)<0)return g;var m=g.split(new RegExp("".concat(y,"[ ]*{"))),d="{".concat(m[1]);g=m[0],d=this.interpolate(d,u);var v=d.match(/'/g),S=d.match(/"/g);(v&&v.length%2===0&&!S||S.length%2!==0)&&(d=d.replace(/'/g,'"'));try{u=JSON.parse(d),p&&(u=L(L({},p),u))}catch(w){return this.logger.warn("failed parsing options string in nesting for key ".concat(g),w),"".concat(g).concat(y).concat(d)}return delete u.defaultValue,g}for(;a=this.nestingRegexp.exec(t);){var h=[];u=L({},i),u=u.replace&&typeof u.replace!="string"?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;var c=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var l=a[1].split(this.formatSeparator).map(function(g){return g.trim()});a[1]=l.shift(),h=l,c=!0}if(o=n(f.call(this,a[1].trim(),u),u),o&&a[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=Je(o)),o||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(t)),o=""),c&&(o=h.reduce(function(g,p){return r.format(g,p,i.lng,L(L({},i),{},{interpolationkey:a[1].trim()}))},o.trim())),t=t.replace(a[0],o),this.regexp.lastIndex=0}return t}}]),s}();function nt(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function I(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nt(Object(t),!0).forEach(function(n){D(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):nt(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function ir(s){var e=s.toLowerCase().trim(),t={};if(s.indexOf("(")>-1){var n=s.split("(");e=n[0].toLowerCase().trim();var r=n[1].substring(0,n[1].length-1);if(e==="currency"&&r.indexOf(":")<0)t.currency||(t.currency=r.trim());else if(e==="relativetime"&&r.indexOf(":")<0)t.range||(t.range=r.trim());else{var i=r.split(";");i.forEach(function(a){if(a){var o=a.split(":"),u=wt(o),f=u[0],h=u.slice(1),c=h.join(":").trim().replace(/^'+|'+$/g,"");t[f.trim()]||(t[f.trim()]=c),c==="false"&&(t[f.trim()]=!1),c==="true"&&(t[f.trim()]=!0),isNaN(c)||(t[f.trim()]=parseInt(c,10))}})}}return{formatName:e,formatOptions:t}}function q(s){var e={};return function(n,r,i){var a=r+JSON.stringify(i),o=e[a];return o||(o=s(r,i),e[a]=o),o(n)}}var sr=function(){function s(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,s),this.logger=C.create("formatter"),this.options=e,this.formats={number:q(function(t,n){var r=new Intl.NumberFormat(t,I({},n));return function(i){return r.format(i)}}),currency:q(function(t,n){var r=new Intl.NumberFormat(t,I(I({},n),{},{style:"currency"}));return function(i){return r.format(i)}}),datetime:q(function(t,n){var r=new Intl.DateTimeFormat(t,I({},n));return function(i){return r.format(i)}}),relativetime:q(function(t,n){var r=new Intl.RelativeTimeFormat(t,I({},n));return function(i){return r.format(i,n.range||"day")}}),list:q(function(t,n){var r=new Intl.ListFormat(t,I({},n));return function(i){return r.format(i)}})},this.init(e)}return E(s,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=n.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(t,n){this.formats[t.toLowerCase().trim()]=n}},{key:"addCached",value:function(t,n){this.formats[t.toLowerCase().trim()]=q(n)}},{key:"format",value:function(t,n,r){var i=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=n.split(this.formatSeparator),u=o.reduce(function(f,h){var c=ir(h),l=c.formatName,g=c.formatOptions;if(i.formats[l]){var p=f;try{var y=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},m=y.locale||y.lng||a.locale||a.lng||r;p=i.formats[l](f,m,I(I(I({},g),a),y))}catch(d){i.logger.warn(d)}return p}else i.logger.warn("there was no format function for ".concat(l));return f},t);return u}}]),s}();function it(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function st(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?it(Object(t),!0).forEach(function(n){D(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):it(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function ar(s){var e=or();return function(){var n=T(s),r;if(e){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ie(this,r)}}function or(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ur(s,e){s.pending[e]!==void 0&&(delete s.pending[e],s.pendingCount--)}var cr=function(s){me(t,s);var e=ar(t);function t(n,r,i){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return A(this,t),a=e.call(this),ye&&$.call(K(a)),a.backend=n,a.store=r,a.services=i,a.languageUtils=i.languageUtils,a.options=o,a.logger=C.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=o.maxParallelReads||10,a.readingCalls=0,a.maxRetries=o.maxRetries>=0?o.maxRetries:5,a.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(i,o.backend,o),a}return E(t,[{key:"queueLoad",value:function(r,i,a,o){var u=this,f={},h={},c={},l={};return r.forEach(function(g){var p=!0;i.forEach(function(y){var m="".concat(g,"|").concat(y);!a.reload&&u.store.hasResourceBundle(g,y)?u.state[m]=2:u.state[m]<0||(u.state[m]===1?h[m]===void 0&&(h[m]=!0):(u.state[m]=1,p=!1,h[m]===void 0&&(h[m]=!0),f[m]===void 0&&(f[m]=!0),l[y]===void 0&&(l[y]=!0)))}),p||(c[g]=!0)}),(Object.keys(f).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(f),pending:Object.keys(h),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(l)}}},{key:"loaded",value:function(r,i,a){var o=r.split("|"),u=o[0],f=o[1];i&&this.emit("failedLoading",u,f,i),a&&this.store.addResourceBundle(u,f,a),this.state[r]=i?-1:2;var h={};this.queue.forEach(function(c){Vt(c.loaded,[u],f),ur(c,r),i&&c.errors.push(i),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(function(l){h[l]||(h[l]={});var g=c.loaded[l];g.length&&g.forEach(function(p){h[l][p]===void 0&&(h[l][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(function(c){return!c.done})}},{key:"read",value:function(r,i,a){var o=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,h=arguments.length>5?arguments[5]:void 0;if(!r.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:i,fcName:a,tried:u,wait:f,callback:h});return}this.readingCalls++;var c=function(y,m){if(o.readingCalls--,o.waitingReads.length>0){var d=o.waitingReads.shift();o.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(y&&m&&u<o.maxRetries){setTimeout(function(){o.read.call(o,r,i,a,u+1,f*2,h)},f);return}h(y,m)},l=this.backend[a].bind(this.backend);if(l.length===2){try{var g=l(r,i);g&&typeof g.then=="function"?g.then(function(p){return c(null,p)}).catch(c):c(null,g)}catch(p){c(p)}return}return l(r,i,c)}},{key:"prepareLoading",value:function(r,i){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof i=="string"&&(i=[i]);var f=this.queueLoad(r,i,o,u);if(!f.toLoad.length)return f.pending.length||u(),null;f.toLoad.forEach(function(h){a.loadOne(h)})}},{key:"load",value:function(r,i,a){this.prepareLoading(r,i,{},a)}},{key:"reload",value:function(r,i,a){this.prepareLoading(r,i,{reload:!0},a)}},{key:"loadOne",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=r.split("|"),u=o[0],f=o[1];this.read(u,f,"read",void 0,void 0,function(h,c){h&&i.logger.warn("".concat(a,"loading namespace ").concat(f," for language ").concat(u," failed"),h),!h&&c&&i.logger.log("".concat(a,"loaded namespace ").concat(f," for language ").concat(u),c),i.loaded(r,h,c)})}},{key:"saveMissing",value:function(r,i,a,o,u){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var c=st(st({},f),{},{isUpdate:u}),l=this.backend.create.bind(this.backend);if(l.length<6)try{var g;l.length===5?g=l(r,i,a,o,c):g=l(r,i,a,o),g&&typeof g.then=="function"?g.then(function(p){return h(null,p)}).catch(h):h(null,g)}catch(p){h(p)}else l(r,i,a,o,h,c)}!r||!r[0]||this.store.addResource(r[0],i,a,o)}}}]),t}($);function at(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(z(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),z(e[2])==="object"||z(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(r){t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function ot(s){return typeof s.ns=="string"&&(s.ns=[s.ns]),typeof s.fallbackLng=="string"&&(s.fallbackLng=[s.fallbackLng]),typeof s.fallbackNS=="string"&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs&&s.supportedLngs.indexOf("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),s}function ut(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function k(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ut(Object(t),!0).forEach(function(n){D(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ut(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function fr(s){var e=lr();return function(){var n=T(s),r;if(e){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ie(this,r)}}function lr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ce(){}function hr(s){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(s));e.forEach(function(t){typeof s[t]=="function"&&(s[t]=s[t].bind(s))})}var ve=function(s){me(t,s);var e=fr(t);function t(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(A(this,t),n=e.call(this),ye&&$.call(K(n)),n.options=ot(r),n.services={},n.logger=C,n.modules={external:[]},hr(K(n)),i&&!n.isInitialized&&!r.isClone){if(!n.options.initImmediate)return n.init(r,i),ie(n,K(n));setTimeout(function(){n.init(r,i)},0)}return n}return E(t,[{key:"init",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof i=="function"&&(a=i,i={}),!i.defaultNS&&i.defaultNS!==!1&&i.ns&&(typeof i.ns=="string"?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));var o=at();this.options=k(k(k({},o),this.options),ot(i)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=k(k({},o.interpolation),this.options.interpolation)),i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);function u(d){return d?typeof d=="function"?new d:d:null}if(!this.options.isClone){this.modules.logger?C.init(u(this.modules.logger),this.options):C.init(null,this.options);var f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=sr);var h=new Ze(this.options);this.store=new Wt(this.options.resources,this.options);var c=this.services;c.logger=C,c.resourceStore=this.store,c.languageUtils=h,c.pluralResolver=new rr(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(c.formatter=u(f),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new nr(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new cr(u(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(d){for(var v=arguments.length,S=new Array(v>1?v-1:0),w=1;w<v;w++)S[w-1]=arguments[w];r.emit.apply(r,[d].concat(S))}),this.modules.languageDetector&&(c.languageDetector=u(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=u(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new Xe(this.services,this.options),this.translator.on("*",function(d){for(var v=arguments.length,S=new Array(v>1?v-1:0),w=1;w<v;w++)S[w-1]=arguments[w];r.emit.apply(r,[d].concat(S))}),this.modules.external.forEach(function(d){d.init&&d.init(r)})}if(this.format=this.options.interpolation.format,a||(a=ce),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var g=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];g.forEach(function(d){r[d]=function(){var v;return(v=r.store)[d].apply(v,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(d){r[d]=function(){var v;return(v=r.store)[d].apply(v,arguments),r}});var y=te(),m=function(){var v=function(w,R){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),y.resolve(R),a(w,R)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return v(null,r.t.bind(r));r.changeLanguage(r.options.lng,v)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),y}},{key:"loadResources",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce,o=a,u=typeof r=="string"?r:this.language;if(typeof r=="function"&&(o=r),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return o();var f=[],h=function(g){if(g){var p=i.services.languageUtils.toResolveHierarchy(g);p.forEach(function(y){f.indexOf(y)<0&&f.push(y)})}};if(u)h(u);else{var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.forEach(function(l){return h(l)})}this.options.preload&&this.options.preload.forEach(function(l){return h(l)}),this.services.backendConnector.load(f,this.options.ns,function(l){!l&&!i.resolvedLanguage&&i.language&&i.setResolvedLanguage(i.language),o(l)})}else o(null)}},{key:"reloadResources",value:function(r,i,a){var o=te();return r||(r=this.languages),i||(i=this.options.ns),a||(a=ce),this.services.backendConnector.reload(r,i,function(u){o.resolve(),a(u)}),o}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&gt.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"setResolvedLanguage",value:function(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1))for(var i=0;i<this.languages.length;i++){var a=this.languages[i];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(r,i){var a=this;this.isLanguageChangingTo=r;var o=te();this.emit("languageChanging",r);var u=function(l){a.language=l,a.languages=a.services.languageUtils.toResolveHierarchy(l),a.resolvedLanguage=void 0,a.setResolvedLanguage(l)},f=function(l,g){g?(u(g),a.translator.changeLanguage(g),a.isLanguageChangingTo=void 0,a.emit("languageChanged",g),a.logger.log("languageChanged",g)):a.isLanguageChangingTo=void 0,o.resolve(function(){return a.t.apply(a,arguments)}),i&&i(l,function(){return a.t.apply(a,arguments)})},h=function(l){!r&&!l&&a.services.languageDetector&&(l=[]);var g=typeof l=="string"?l:a.services.languageUtils.getBestMatchFromCodes(l);g&&(a.language||u(g),a.translator.language||a.translator.changeLanguage(g),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(g)),a.loadResources(g,function(p){f(p,g)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(r),o}},{key:"getFixedT",value:function(r,i,a){var o=this,u=function f(h,c){var l;if(z(c)!=="object"){for(var g=arguments.length,p=new Array(g>2?g-2:0),y=2;y<g;y++)p[y-2]=arguments[y];l=o.options.overloadTranslationOptionHandler([h,c].concat(p))}else l=k({},c);l.lng=l.lng||f.lng,l.lngs=l.lngs||f.lngs,l.ns=l.ns||f.ns,l.keyPrefix=l.keyPrefix||a||f.keyPrefix;var m=o.options.keySeparator||".",d;return l.keyPrefix&&Array.isArray(h)?d=h.map(function(v){return"".concat(l.keyPrefix).concat(m).concat(v)}):d=l.keyPrefix?"".concat(l.keyPrefix).concat(m).concat(h):h,o.t(d,l)};return typeof r=="string"?u.lng=r:u.lngs=r,u.ns=i,u.keyPrefix=a,u}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var o=a.lng||this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;var h=function(g,p){var y=i.services.backendConnector.state["".concat(g,"|").concat(p)];return y===-1||y===2};if(a.precheck){var c=a.precheck(this,h);if(c!==void 0)return c}return!!(this.hasResourceBundle(o,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(o,r)&&(!u||h(f,r)))}},{key:"loadNamespaces",value:function(r,i){var a=this,o=te();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(u){a.options.ns.indexOf(u)<0&&a.options.ns.push(u)}),this.loadResources(function(u){o.resolve(),i&&i(u)}),o):(i&&i(),Promise.resolve())}},{key:"loadLanguages",value:function(r,i){var a=te();typeof r=="string"&&(r=[r]);var o=this.options.preload||[],u=r.filter(function(f){return o.indexOf(f)<0});return u.length?(this.options.preload=o.concat(u),this.loadResources(function(f){a.resolve(),i&&i(f)}),a):(i&&i(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new Ze(at());return i.indexOf(a.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce,o=k(k(k({},this.options),i),{isClone:!0}),u=new t(o);(i.debug!==void 0||i.prefix!==void 0)&&(u.logger=u.logger.clone(i));var f=["store","services","language"];return f.forEach(function(h){u[h]=r[h]}),u.services=k({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new Xe(u.services,u.options),u.translator.on("*",function(h){for(var c=arguments.length,l=new Array(c>1?c-1:0),g=1;g<c;g++)l[g-1]=arguments[g];u.emit.apply(u,[h].concat(l))}),u.init(o,a),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}($);D(ve,"createInstance",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new ve(s,e)});var x=ve.createInstance();x.createInstance=ve.createInstance;var gr=x.createInstance;x.dir;x.init;x.loadResources;x.reloadResources;x.use;x.changeLanguage;x.getFixedT;x.t;x.exists;x.setDefaultNamespace;x.hasLoadedNamespace;x.loadNamespaces;x.loadLanguages;const je="en";var H,ne;const Ae=class Ae{constructor(e){xe(this,H);xe(this,ne,new Set);Ve(this,H,e)}static create(){const e=gr({fallbackLng:je,supportedLngs:[je],interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(e.init(),!e.isInitialized)throw new Error("i18next was unexpectedly not initialized");return new Ae(e)}getTranslation(e){const t=St(e);return Z(this,ne).has(t.id)||(Z(this,ne).add(t.id),Z(this,H).addResourceBundle(je,t.id,t.getDefaultMessages(),!1,!0)),{ready:!0,t:Z(this,H).getFixedT(null,t.id)}}translation$(){return new ke(e=>()=>{})}};H=new WeakMap,ne=new WeakMap;let ct=Ae;export{_r as A,Ce as B,ge as C,Kr as E,$r as G,Vr as L,ct as M,Dr as O,Er as a,Fr as b,Tr as c,Mr as d,xr as e,Ar as f,Or as g,Pr as h,Nr as i,Rr as j,Ur as k,F as l,gr as m,jr as n,Ir as o,Lr as p,kr as q,Cr as r};
